
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../tutorials/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Explanation - duet-tools Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#inputs-module" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="duet-tools Documentation" class="md-header__button md-logo" aria-label="duet-tools Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            duet-tools Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Explanation
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/nmc-cafes/duet-tools" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    duet-tools
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="duet-tools Documentation" class="md-nav__button md-logo" aria-label="duet-tools Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    duet-tools Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/nmc-cafes/duet-tools" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    duet-tools
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Explanation
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Explanation
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#inputs-module" class="md-nav__link">
    <span class="md-ellipsis">
      Inputs Module
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calibration-module" class="md-nav__link">
    <span class="md-ellipsis">
      Calibration Module
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Calibration Module">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#working-with-duet" class="md-nav__link">
    <span class="md-ellipsis">
      Working with DUET
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calibration-methods-and-targets" class="md-nav__link">
    <span class="md-ellipsis">
      Calibration Methods and Targets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Calibration Methods and Targets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    <span class="md-ellipsis">
      Methods
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fuel-types-and-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Fuel Types and Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calibration" class="md-nav__link">
    <span class="md-ellipsis">
      Calibration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-landfire-targets" class="md-nav__link">
    <span class="md-ellipsis">
      Using LANDFIRE Targets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#duetrun-class" class="md-nav__link">
    <span class="md-ellipsis">
      DuetRun Class
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DuetRun Class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-calibration" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-Calibration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-calibration" class="md-nav__link">
    <span class="md-ellipsis">
      Post-Calibration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#landfire-module" class="md-nav__link">
    <span class="md-ellipsis">
      Landfire Module
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../how-to-guides/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How-To Guides
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#inputs-module" class="md-nav__link">
    <span class="md-ellipsis">
      Inputs Module
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calibration-module" class="md-nav__link">
    <span class="md-ellipsis">
      Calibration Module
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Calibration Module">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#working-with-duet" class="md-nav__link">
    <span class="md-ellipsis">
      Working with DUET
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calibration-methods-and-targets" class="md-nav__link">
    <span class="md-ellipsis">
      Calibration Methods and Targets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Calibration Methods and Targets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#methods" class="md-nav__link">
    <span class="md-ellipsis">
      Methods
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fuel-types-and-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Fuel Types and Parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#calibration" class="md-nav__link">
    <span class="md-ellipsis">
      Calibration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-landfire-targets" class="md-nav__link">
    <span class="md-ellipsis">
      Using LANDFIRE Targets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#duetrun-class" class="md-nav__link">
    <span class="md-ellipsis">
      DuetRun Class
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DuetRun Class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-calibration" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-Calibration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#post-calibration" class="md-nav__link">
    <span class="md-ellipsis">
      Post-Calibration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#landfire-module" class="md-nav__link">
    <span class="md-ellipsis">
      Landfire Module
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Explanation</h1>

<h2 id="inputs-module">Inputs Module</h2>
<p>The <a href="../reference/#duet_tools.inputs"><code>inputs</code></a> module in <code>duet-tools</code> offers a convenient way to programmatically write a DUET input file. Other inputs, such as canopy and species grids, must be supplied by the user. A DUET input file takes information about the 3D domain size (<strong>nx, ny, nz</strong>) and resolution (<strong>dx, dy, dz</strong>), the wind information (<strong>wind_direction, wind_variability</strong>), and the simulation parameters (<strong>duration, random_seed</strong>).</p>
<h2 id="calibration-module">Calibration Module</h2>
<p>The <a href="../reference/#duet_tools.calibration"><code>calibration</code></a> module in <code>duet-tools</code> is a central part of the package that allows the user to scale the numeric values in DUET output files to match user-supplied target values, without altering the spatial distributions calculated in DUET. Calibrated DUET files (and DUET files in general) are meant to be used by QUIC-Fire or FIRETEC fire behavior models, and export methods for those models are included.</p>
<h3 id="working-with-duet">Working with DUET</h3>
<p>The <code>duet-tools</code> package assumes that the user has a license and acces to the DUET program, developed by Los Alamos National Lab. DUET distributes surface fuels based on the locations of tree canopies, the prevailing wind direction, and the time since fire. The user is responsible for parameterizing and running DUET; all calibibration in <code>duet-tools</code> is done post-hoc. By default, DUET will output two files called <em>surface_rhof.dat</em> and <em>surface_depth.dat</em>, which are Fortran-formatted arrays representing the surface fuel loading (bulk density) and surface fuel depth. They are 3D arrays where the first z layer (axis 0) is represents grass loading/moisture/depth, and the next two layers represent coniferous and deciduous tree litter, respectively.</p>
<p>The <a href="../reference/#duet_tools.calibration.import_duet"><code>import_duet</code></a> function assumes that DUET input and output files are present in the given directory, and that they have not been renamed or altered. Alternatively, the user may import duet arrays manually by providing file names and array sizes for the necessary DUET outputs using <a href="../reference/#duet_tools.calibration.import_duet_manual"><code>import_duet_manual</code></a>. Once DUET output files are imported, the resulting <a href="../reference/#duet_tools.calibration.DuetRun"><code>DuetRun</code></a> object stores and orgainzes the arrays for all subsequent manipulations.</p>
<h3 id="calibration-methods-and-targets">Calibration Methods and Targets</h3>
<p>The goal of the <code>calibration</code> module revolves around scaling the magnitude of DUET values without changing their spatial distribution. This assumes that the user has a target for the <em>range</em> or <em>distribution</em> of the values for each fuel type and/or parameter. Depending on ther user's knowledge of the target fuels, they may choose the appropriate <strong>method</strong>, specified in the <a href="../reference/#duet_tools.calibration.assign_targets"><code>assign_targets</code></a> function.</p>
<h4 id="methods">Methods</h4>
<ul>
<li><strong>maxmin:</strong> If the user has a target <em>range</em> of values, they can specify the maximum and minimum, and the existing DUET values will be scaled to that range without changing the underlying distribution.</li>
<li><strong>meansd:</strong> If the user has a target <em>distribution</em> of values, they can specify the mean and standard deviation. The distribution of DUET values will be scaled by shifting the mean and altering the spread. This method assumes that both the DUET and target values are normally distributed. Resulting values are truncated at 0.</li>
<li><strong>constant:</strong> This method may be used to change all nonzero values of a fuel type/parameter to a single specifed value. This affects all nonzero values of the fuel type/parameter, so the spatial distribution is preserved.</li>
</ul>
<p>Specifying methods and target values in <code>assign_targets</code> creates an instance of class <a href="../reference/#duet_tools.calibration.Targets"><code>Targets</code></a>, which stores and validates the provided information.</p>
<h3 id="fuel-types-and-parameters">Fuel Types and Parameters</h3>
<p>Fuels are described in QUIC-Fire and FIRETEC using different <em>parameters</em> that affect fire behavior. The main parameters are fuel <em>loading</em>, fuel <em>moisture</em>, and fuelbed <em>depth</em> of the surface fuels. DUET distributes fuel loading and depth. DUET version 1 does not output fuel moisture.</p>
<p>These parameters are described for two <em>fuel types</em> in DUET: leaf/needle litter, which is stochastically distributed near tree canopies, and grass, which is more likely to "grow" in more open areas between tree canopies. DUET outputs separate arrays for each fuel parameter, with layers representing grass and litter fuel types.</p>
<p><code>duet-tools</code> can calibrate any combination of fuel type and parameter with methods and targets contained in a <code>Targets</code> class object. The <code>Targets</code> class is agnostic of both fuel type and fuel parameter, and can thus be assigned to any number of fuel types and parameters. The <a href="../reference/#duet_tools.calibration.FuelParameter"><code>FuelParameter</code></a> class represents a single fuel parameter (<em>e.g.</em> fuel loading), storing and validating all assigned <code>Targets</code>.</p>
<p>A <code>FuelParameter</code> class instance is created using the <a href="../reference/#duet_tools.calibration.set_fuel_parameter"><code>set_fuel_parameter</code></a> function. The parameter to be calibrated is specified, and the <code>Targets</code> objects are supplied to whichever fuel type they are meant to calibrate. Grass, coniferous litter, and deciduous litter can be calibrated individually, separately by specifying them as separate arguments, or together by using the argument <em>all</em> or <em>litter</em> (they can optionally be separated back into their component fuel types after calibration).</p>
<h3 id="calibration">Calibration</h3>
<p>The <a href="../reference/#duet_tools.calibration.calibrate"><code>calibrate</code></a> function handles all the calculations for scaling DUET values based on the supplied <code>FuelParameter</code> objects and their associated <code>Targets</code>. The <code>calibrate</code> function is meant to be called only once, after all <code>FuelParameter</code> objects have been created with all desired <code>Targets</code>. Calibration is performed on a <code>DuetRun</code> object, and new <code>DuetRun</code> object is returned.</p>
<p>Because a <code>Targets</code> object can be assigned to any fuel parameter and type, the user may mix and match methods and target values for whichever fuels they wish to alter. There are no requirements to the number of parameters or types that can or cannot be calibrated.</p>
<h3 id="using-landfire-targets">Using LANDFIRE Targets</h3>
<p>In many situations, fuels data for specific burn units may not be available. LANDFIRE is a national dataset that includes 30m-resoltuion Scott and Burgan 40 Fuel Model (SB40) designations. From these data, values for fuel loading, moisture, and depth can be derived. The <code>landfire</code> module offers a method of querying SB40 LANDFIRE data for a specific burn unit and assigning calibration targets based on those designations.</p>
<p>To use LANDFIRE data, the user must use the <a href="../reference/#duet_tools.landfire"><code>landfire</code></a> module to query LANDFIRE data (see below). Once data has been queried, the resulting <a href="../reference/#duet_tools.landfire.LandfireQuery"><code>LandfireQuery</code></a> object is passed to the <a href="../reference/#duet_tools.landfire.assign_targets_from_sb40"><code>assign_targets_from_sb40</code></a> function. Because LANDFIRE data most often does not follow a normal distribution, the calibration method defaults to "maxmin", and "meansd" is not recommended. Unlike <code>assign_targets</code>, which does not specify fuel parameter or type, both must be specified in <code>assign_targets_from_sb40</code>. However, the resulting <code>Targets</code> object is treated like any other, and must be assigned to the correct fuel parameter and type(s) in <code>set_fuel_parameter</code>.
<strong>NOTE:</strong> the <code>landfire</code> module is only available for Python v3.10 and must be installed using <code>pip install duet-tools[landfire]</code></p>
<h3 id="duetrun-class">DuetRun Class</h3>
<p>The <a href="../reference/#duet_tools.calibration.DuetRun"><code>DuetRun</code></a> class is instantiated using the <code>import_duet</code> function. It's three attributes correspond to the 3D fuel parameter arrays that may be calibrated: <code>loading</code>, <code>moisture</code>, and <code>depth</code>.</p>
<h4 id="pre-calibration">Pre-Calibration</h4>
<p>Before a DuetRun class is calibrated, it simply holds the surface_*.dat output arrays from a specified directory. A user can conveniently interface with these arrays outside of duet-tools by using the <code>to_numpy</code> function (see below).</p>
<h4 id="post-calibration">Post-Calibration</h4>
<p>The <code>calibrate</code> function returns a new instance of the <code>DuetRun</code> class containing calibrated arrays. These arrays can then be exported in a few ways using methods from the <code>DuetRun</code> class.</p>
<p>The <a href="../reference/#duet_tools.calibration.DuetRun.to_numpy"><code>to_numpy</code></a>method  returns a numpy array of a specifed fuel parameter and type. Arrays can be returned as an <em>integrated</em> 2D array, where the fuel types are combined for a given parameter, or a <em>separated</em> 3D array, where the fuel types occupy different z-layers (axis 0).</p>
<p>The <a href="../reference/#duet_tools.calibration.DuetRun.to_quicfire"><code>to_quicfire</code></a> method writes Fortran files (.dat) to be used in QUIC-Fire. Fuel types are integrated for each fuel parameter, and exported as a 3D array with 1 z-layer. The filenames are set to match QUIC-Fire's expected file naming system.</p>
<h2 id="landfire-module">Landfire Module</h2>
<p>The <a href="../reference/#duet_tools.landfire"><code>Landfire</code></a> module is an auxiliary module handling the interfacing and processing of LANDFIRE data. Data is queried using the <a href="../reference/#duet_tools.landfire.query_landfire"><code>query_landfire</code></a> function by providing spatial data and information for the area of interest. An instance of class <a href="../reference/#duet_tools.landfire.LandfireQuery"><code>LandfireQuery</code></a> is returned, which can be provided to <code>assign_targets_from_sb40</code> in the <code>calibration</code> module.</p>
<p>Values for fuel loading, fuel moisture, and surface fuel depth are derived from Scott and Burgan 40 Fuel Model designations, using methods developed for FastFuels (citation). These data are available at a 30x30m resolution for the contiguous United States.</p>
<p>When a fuel type is selected (<em>e.g.</em> grass or litter), fuel parameter values are derived from only SB40 Fuel Models that are predominantly comprised of that fuel type. Because DUET does not have a designation for shrub fuels, any SB40 Fuel Model with major shrub components are categorized as grass, since their growth patterns will also follow light availability.</p>
<p>If a user attempts to assign targets from a fuel type that is not present in the area of interest, an error will be given. If there is a single parameter value for a given fuel type in the area of interest, targets will automatically be given the "constant" calibration method, and a warning will be issued. Using the "meansd" calibration method is generally discouraged, since values derived from SB40 most often do not follow a normal distribution.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>